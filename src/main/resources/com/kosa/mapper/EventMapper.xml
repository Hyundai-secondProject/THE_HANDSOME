<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper  
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- /** * @author 김민규 * @since 2022.10.18 * @version 1.0 * * <pre> * 수정일 
	수정자 수정내용 * * 2022.10.18 김민규 최초 생성 * 2022.10.20 김민규 지난 이벤트 리스트 페이지,이벤트 상세 
	페이지 추가 * 2022.10.21 김민규 마이페이지 쿠폰 조회 추가 * </pre> */ -->

<mapper namespace="com.kosa.mapper.EventMapper">

	<!-- 진행중인 이벤트 리스트 페이지 -->
	<select id="getEventList"
		resultType="com.kosa.domain.event.EventViewVO">
		select ENO, ETITLE, EISSUEDATE, EEXPIREDATE, EIMG from
		EVENT where ESTATUS =1
	</select>

	<!-- 지난 이벤트 리스트 페이지 -->
	<select id="getEventListpast"
		resultType="com.kosa.domain.event.EventViewVO">
		select ENO, ETITLE, EISSUEDATE, EEXPIREDATE, EIMG from
		EVENT where ESTATUS =0
	</select>
	<!-- 이벤트 상세 페이지 -->
	<select id="getEventDetail"
		resultType="com.kosa.domain.event.EventDetailViewVO">
		select ETITLE, EISSUEDATE, EEXPIREDATE, EDETAILIMG from
		EVENT where ENO = #{ENO}
	</select>

	<!-- 마이페이지 쿠폰 조회 -->
	<select id= "getCouponDetail"  resultType="com.kosa.domain.event.CouponDetailViewVO">
		select (select ecoupontitle from event where event.eno = coupon_detail.eno) as ecoupontitle ,
cpid,(select econtent from event where event.eno = coupon_detail.eno) as econtent,
(select ediscount from event where event.eno = coupon_detail.eno) as ediscount ,cpissuedate,cpexpiredate,cpusedate from coupon_detail
where mid= #{MID}
	</select>

</mapper>